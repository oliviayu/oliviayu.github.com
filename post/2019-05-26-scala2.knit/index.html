<!DOCTYPE html>
<html lang="en-us">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Source Themes Academic 4.1.0">
  <meta name="generator" content="Hugo 0.54.0" />

  

  
  
  
  
  
    
    
    
  
  

  <meta name="author" content="Tingting Yu">

  
  
  
    
  
  <meta name="description" content="Function Syntax Scala is a functional programming language, which means that functions are first-class citizens and you can pass them around as parameters or values.
def add(x: Int, y: Int): Int = { return x &#43; y; } println(add(21, 19)); // Other variants def multiply(x: Int, y: Int): Int = x * y // simplified version def divide(x: Int, y: Int) = x / y // can ignore the output type if it&#39;s obvious def substract(x: Int = 10, y: Int = 2) = x - y // set default values  You can define the function names as operator, e.">

  
  <link rel="alternate" hreflang="en-us" href="/post/2019-05-26-scala2.knit/">

  


  

  

  

  

  

  

  
  
  
  <meta name="theme-color" content="#2962ff">
  

  
  
  
  
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha256-eSi1q2PG6J7g7ib17yAaWMcrr5GrtohYChqibrV7PBE=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css" integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.0/css/all.css" integrity="sha384-aOkxzJ5uQz7WBObEZcHvV5JvRW3TUc2rNPA7pe3AwnsUohiw1Vj2Rgx2KSOkF5+h" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.css" integrity="sha256-ygkqlh3CYSUri3LhQxzdcm0n1EQvH2Y+U5S2idbLtxs=" crossorigin="anonymous">

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" crossorigin="anonymous" title="hl-light">
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark" disabled>
        
      
    

    

    

  

  
  
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Montserrat:400,700|Roboto:400,400italic,700|Roboto+Mono">
  

  <link rel="stylesheet" href="/styles.css">
  

  
  
  

  
  <link rel="alternate" href="/index.xml" type="application/rss+xml" title="Tingting&#39;s Blog">
  <link rel="feed" href="/index.xml" type="application/rss+xml" title="Tingting&#39;s Blog">
  

  <link rel="manifest" href="/site.webmanifest">
  <link rel="icon" type="image/png" href="/img/icon.png">
  <link rel="apple-touch-icon" type="image/png" href="/img/icon-192.png">

  <link rel="canonical" href="/post/2019-05-26-scala2.knit/">

  
  
  
  
    
    
  
  <meta property="twitter:card" content="summary">
  
  <meta property="og:site_name" content="Tingting&#39;s Blog">
  <meta property="og:url" content="/post/2019-05-26-scala2.knit/">
  <meta property="og:title" content="Scala notes II -- Functions | Tingting&#39;s Blog">
  <meta property="og:description" content="Function Syntax Scala is a functional programming language, which means that functions are first-class citizens and you can pass them around as parameters or values.
def add(x: Int, y: Int): Int = { return x &#43; y; } println(add(21, 19)); // Other variants def multiply(x: Int, y: Int): Int = x * y // simplified version def divide(x: Int, y: Int) = x / y // can ignore the output type if it&#39;s obvious def substract(x: Int = 10, y: Int = 2) = x - y // set default values  You can define the function names as operator, e."><meta property="og:image" content="/img/icon-192.png">
  <meta property="og:locale" content="en-us">
  
  <meta property="article:published_time" content="2019-05-26T00:00:00&#43;00:00">
  
  <meta property="article:modified_time" content="2019-05-26T00:00:00&#43;00:00">
  

  

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.js"></script>
<script>
  window.addEventListener("load", function(){
    window.cookieconsent.initialise({
      "palette": {
        "popup": {
          "background": "#2962ff",
          "text": "#fff"
        },
        "button": {
          "background": "#fff",
          "text": "#2962ff"
        }
      },
      "theme": "classic",
      "content": {
        "message": "This website uses cookies to ensure you get the best experience on our website.",
        "dismiss": "Got it!",
        "link": "Learn more",
        "href": "https://cookies.insites.com"
      }
    })});
</script>


  

  <title>Scala notes II -- Functions | Tingting&#39;s Blog</title>

</head>
<body id="top" data-spy="scroll" data-target="#TableOfContents" data-offset="71" >
  
<aside class="search-results" id="search">
  <div class="container">
    <section class="search-header">
      

      <div id="search-box">
        
        
        
      </div>

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>


<nav class="navbar navbar-light fixed-top navbar-expand-lg py-0" id="navbar-main">
  <div class="container">

    
      <a class="navbar-brand" href="/">Tingting&#39;s Blog</a>
      
      <button type="button" class="navbar-toggler" data-toggle="collapse"
              data-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
        <span><i class="fas fa-bars"></i></span>
      </button>
      

    
    <div class="collapse navbar-collapse" id="navbar">

      
      
      <ul class="navbar-nav mr-auto">
        

        

        
        
        
          
        

        <li class="nav-item">
          <a class="nav-link" href="/post/">
            
            <span>Posts</span>
            
          </a>
        </li>

        
        

      
      </ul>
      <ul class="navbar-nav ml-auto">
      

        

        

        

        
        <li class="nav-item">
          <a class="nav-link js-dark-toggle" href="#"><i class="fas fa-moon" aria-hidden="true"></i></a>
        </li>
        

      </ul>

    </div>
  </div>
</nav>


<article class="article" itemscope itemtype="http://schema.org/Article">

  












  

  
  
  
<div class="article-container pt-3">
  <h1 itemprop="name">Scala notes II -- Functions</h1>

  

  
    



<meta content="2019-05-26 00:00:00 &#43;0000 UTC" itemprop="datePublished">
<meta content="2019-05-26 00:00:00 &#43;0000 UTC" itemprop="dateModified">

<div class="article-metadata">

  
  

  
  <span class="article-date">
    
    
      
    
    <time>2019-05-26</time>
  </span>
  

  

  

  
  

  
  
  
  <span class="middot-divider"></span>
  <span class="article-categories">
    <i class="fas fa-folder"></i>
    
    <a href="/categories/programming/">programming</a>
    
  </span>
  
  

  
    

  

</div>

    















  
</div>



  <div class="article-container">

    <div class="article-style" itemprop="articleBody">
      

<h1 id="function-syntax">Function Syntax</h1>

<p>Scala is a functional programming language, which means that functions are first-class citizens and you can pass them around as parameters or values.</p>

<pre><code class="language-java">def add(x: Int, y: Int): Int = {
  return x + y;
}
println(add(21, 19));
// Other variants
def multiply(x: Int, y: Int): Int = x * y  // simplified version
def divide(x: Int, y: Int) = x / y  // can ignore the output type if it's obvious
def substract(x: Int = 10, y: Int = 2) = x - y  // set default values
</code></pre>

<p>You can define the function names as operator, e.g. +, *, /, -</p>

<pre><code class="language-java">def +(x: Int, y: Int) = x + y
</code></pre>

<h2 id="partially-applied-functions">Partially applied functions</h2>

<pre><code class="language-java">val sum = (a: Int, b: Int, c: Int) =&gt; a+b+c
val f = sum(10, 20, _:Int)
println(f(100)) // returns 130

import java.util.Date
def log(date: Date, message: String) = {
  println(date + &quot;   &quot; + message);
}
val date = new Date;
val newLog = log(date, _ :String);
newLog(&quot;The message 1.&quot;)
newLog(&quot;The message 2.&quot;)
</code></pre>

<h2 id="closures">Closures</h2>

<p>A closure is a function which uses one or more variables declared outside this function.</p>

<pre><code class="language-java">var number = 10;

//Example 1
val add = (x:Int) =&gt; x + number;
println(add(20))

number = 100
println(add(20))  // If the value of the variable changes, the result changes too.

//Example 2
val add2 = (x:Int) =&gt; {
  number = x+number;
  number
}
println(add2(20))
println(number)  // numbder is 120 now

//Example 3
val number = 10;  // The result won't change since number is fixed.
</code></pre>

<h2 id="blocks-and-lexical-scope">Blocks and Lexical Scope</h2>

<p>We can write nested functions in blocks to avoid name-space pollution. A block is delimited by braces { &hellip; } and it contains a sequence of definitions or expressions. The definitions inside a block are only visible from within the block. The definitions inside a block shadow definitions of the same names outside the block.</p>

<pre><code class="language-java">val x = 0
def f(y: Int) = y + 1
val result = {
  val x = f(3)  // x = 4, f() is visible inside the block
  x * x         // 16, x shadows the x outside the block
} + x           // + 0
// return 16
</code></pre>

<h2 id="recursive-functions">Recursive functions</h2>

<p>Example:</p>

<pre><code class="language-java">def factorial(n: Int): Int =
  if (n == 0) 1 else n * factorial(n - 1)
</code></pre>

<p>This function has a buildup of intermediate results that we have to keep until we can compute the final value so it is not a tail recursive function.</p>

<p><strong>Tail Recursion</strong></p>

<p>If a function calls itself as its last action, the function&rsquo;s
stack frame can be reused. This is called tail recursion.
In general, if the last action of a function consists of calling a function (which may be the same), one stack frame would be sufficient for both functions. Such calls are called tail-calls.</p>

<p>One can require that a function is tail-recursive using a <code>@tailrec</code> annotation. If the annotation is given and the implementation of a function is not tail recursive, an error would be issued.</p>

<p>Example:</p>

<pre><code class="language-java">@tailrec
def factorial(n: Int): Int = {
  def loop(acc: Int, n: Int): Int = 
    if (n == 0) acc 
    else loop(acc * n, n-1)
  loop(1, n)
}
</code></pre>

<p>The interest of tail recursion is mostly to avoid very deep recursive chains. If your input data are such that deep recursive chains could happen, then it&rsquo;s a good idea to reformulate your function to be tail recursive, to run in constant stack frame, so as to avoid stack overflow exceptions.</p>

<p>On the other hand, if your input data are not susceptible to deep recursive chains then write your function the clearest way you can, which often is not tail recursive, and don&rsquo;t worry about the stack frames that are spent. For example, the tail recursive function of factorial above grows very quickly even after very low number of recursive steps. So it is <strong>not worth making factorial a tail recursive function</strong>.</p>

<h1 id="higher-order-functions">Higher-order functions</h1>

<p>An important concept in functional programming is called <strong>higher-order function</strong>. It lets you pass functions as arguments and return them as results. For example,</p>

<pre><code class="language-java">def sum(a: Int, b: Int, f: Int =&gt; Int): Int = {
  if(a &gt; b) 0
  else f(a) + sum(a+1, b, f)
}
def sumInts(a: Int, b: Int) = sum(a, b, x =&gt; x);  
def sumCubes(a: Int, b: Int) = sum(a, b, x =&gt; x * x * x)
</code></pre>

<ul>
<li><p>The <code>Int =&gt; Int</code> is a <strong>function type</strong> that maps <code>Int</code> to <code>Int</code>.</p></li>

<li><p>The <code>x =&gt; x</code> and <code>x =&gt; x * x * x</code> are <strong>anonymous functions</strong> (aka function literals) that do not contain function names. Instead of defining a function <code>cube</code>, for example</p>

<pre><code class="language-java">def cube(x: Int): Int = x * x * x
</code></pre>

<p>the anonymous function <code>x =&gt; x * x * x</code> provides a lightweight function definition and is useful when we want to create an inline function.
<br />
More examples of anonymous functions:</p>

<pre><code class="language-java">(x, y) =&gt; _+_   // i.e. (x, y) =&gt; x+y
(x, y) =&gt; _min _   // i.e. (x, y) =&gt; x min y
(x, y) =&gt; _max _   // i.e. (x, y) =&gt; x max y
// Anonymous functions with parameters
var add = (x: Int, y: Int) =&gt; x + y
// Anonymous functions without parameters
var word = () =&gt; {&quot;Hello world.&quot;}
</code></pre></li>
</ul>

<h2 id="currying">Currying</h2>

<p>Currying is a special form of higher-order function. It can transform a function that takes multiple parameters into a function that consists of (nested) anonymous functions with each taking one parameter.
&lt;!&ndash;That is, transform <code>def f(arg1)(arg2)...(argn) = E</code> to <code>def f = (arg1 =&gt; (arg2 =&gt; ...(agrn =&gt; E))</code>.
<strong>Multiple parameter lists</strong>
A simple example would be</p>

<pre><code class="language-java">def add(x: Int) = (y: Int) =&gt; x + y;
println(add(20)(10));

// You can also apply partial applied function in currying
val sum40 = add(40);
println(sum40(100));

//Simpler version in scala
def add2 (x: Int) (y: Int) = x + y;
val sum50 = add2(50)_;  //have to add _
println(sum50(10))
</code></pre>

<p>&ndash;&gt;</p>

<p>For example, we can rewrite the <code>sum</code> function which takes three parameters <em>(a, b, f)</em> to a function that returns a function</p>

<pre><code class="language-java">def sum(f: Int =&gt; Int): (Int, Int) =&gt; Int = {
  def sumF(a: Int, b: Int): Int =
    if(a &gt; b) 0
    else f(a) + sumF(a+1, b)
  sumF
}
def sumInts = sum(x =&gt; x);
def sumCubes = sum(x =&gt; x * x * x) 
println( sumCubes(1, 3) )
</code></pre>

<p>Here the <code>sum</code> function takes one argument <em>f</em> and returns a function <code>sumF</code> of type <code>(Int, Int) =&gt; Int</code>. This allows us to get rid of those parameters <em>a</em> and <em>b</em> in <code>sumInts</code> and <code>sumCubes</code>. We can also avoid defining <code>sumInts</code> and <code>sumCubes</code> by applying <code>sum</code> to a function directly, for example, <code>sum(cube)(1, 3)</code> is equivalent to <code>sumCubes(1, 3)</code>.</p>

<p>In Scala, functions that return functions are so useful that there is a special syntax for them. For example, the <code>sum</code> function with the nested <code>sumF</code> function can be simplified as</p>

<pre><code class="language-java">def sum(f: Int =&gt; Int)(a: Int, b: Int): Int = {
  if(a &gt; b) 0
  else f(a) + sum(f)(a+1, b)
}
</code></pre>

<p>The function type of <code>sum</code> is <code>(Int =&gt; Int) =&gt; (Int, Int) =&gt; Int</code> or <code>(Int =&gt; Int) =&gt; ( (Int, Int) =&gt; Int )</code></p>

    </div>

    


<div class="article-tags">
  
  <a class="badge badge-light" href="/tags/scala/">scala</a>
  
  <a class="badge badge-light" href="/tags/big-data/">big-data</a>
  
</div>




    
      






  







      
      
      <div class="article-widget">
        <div class="hr-light"></div>
        <h3>Related</h3>
        <ul>
          
          <li><a href="/post/2019-05-26-scala2.utf8/">Scala notes II -- Functions</a></li>
          
          <li><a href="/post/2019-05-26-scala2/">Scala notes II -- Functions</a></li>
          
          <li><a href="/post/2019-05-18-scala1/">Scala notes I</a></li>
          
          <li><a href="/post/2019-04-10-sparklyr/">sparklyr (Spark in R)</a></li>
          
        </ul>
      </div>
      
    

    

    


  </div>
</article>

<div class="container">
  <footer class="site-footer">
  

  <p class="powered-by">
    

    Powered by the
    <a href="https://sourcethemes.com/academic/" target="_blank" rel="noopener">Academic theme</a> for
    <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a>.

    
    <span class="float-right" aria-hidden="true">
      <a href="#" id="back_to_top">
        <span class="button_icon">
          <i class="fas fa-chevron-up fa-2x"></i>
        </span>
      </a>
    </span>
    
  </p>
</footer>

</div>


<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

    

    
    
    
    <script src="/js/mathjax-config.js"></script>
    

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha512-+NqPlbbtM1QqiK8ZAo4Yrj2c4lNQoGv8P79DPtKzj++l5jnN39rHA/xsqn8zE9l0uSoxaCdrOgFs6yjyfbBxSg==" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha256-VsEqElsCHSGmnmHXGQzvoWjWwoznFSZc6hs7ARLRacQ=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.js" integrity="sha256-X5PoE3KU5l+JcX+w09p/wHl9AzK333C4hJ2I9S5mD4M=" crossorigin="anonymous"></script>

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script>
        
      

      
      
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS_CHTML-full" integrity="sha256-GhM+5JHb6QUzOQPXSJLEWP7R73CbkisjzK5Eyij4U9w=" crossorigin="anonymous" async></script>
      
    

    
    

    
    
    

    
    
    <script>hljs.initHighlightingOnLoad();</script>
    

    
    
    <script>
      const search_index_filename = "/index.json";
      const i18n = {
        'placeholder': "Search...",
        'results': "results found",
        'no_results': "No results found"
      };
      const content_type = {
        'post': "Posts",
        'project': "Projects",
        'publication' : "Publications",
        'talk' : "Talks"
        };
    </script>
    

    
    

    

    
    

    
    

    
    
    
    
    
    
    
      
    
    
    
    
    <script src="/js/academic.min.76a41a243fcea75defe7d35a07d3aaa3.js"></script>

  </body>
</html>

